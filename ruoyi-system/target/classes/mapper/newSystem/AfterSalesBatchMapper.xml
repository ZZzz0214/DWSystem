<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.AfterSalesBatchMapper">

	<!-- 定义结果映射 -->
	<resultMap id="AfterSalesBatchMap" type="com.ruoyi.common.core.domain.newEntity.AfterSalesBatch">
		<id property="afterSalesBatchId" column="after_sales_batch_id"/>
		<result property="orderNumber" column="order_number"/>
		<result property="productName" column="product_name"/>
		<result property="internalProductCode" column="internal_product_code"/>
		<result property="quantity" column="quantity"/>
		<result property="recipient" column="recipient"/>
		<result property="contactPhone" column="contact_phone"/>
		<result property="address" column="address"/>
		<result property="date" column="date"/>
		<result property="remarks" column="remarks"/>
		<result property="brand" column="brand"/>
		<result property="returnAndAfterSales" column="return_and_after_sales"/>
		<result property="purchasePrice" column="purchase_price"/>
		<result property="purchaseOtherCost" column="purchase_other_cost"/>
		<result property="purchaseTotalAmount" column="purchase_total_amount"/>
		<result property="purchaseInspection" column="purchase_inspection"/>
		<result property="purchaseStatus" column="purchase_status"/>
		<result property="purchaseRemarks" column="purchase_remarks"/>
		<result property="sellingPrice" column="selling_price"/>
		<result property="sellingOtherCost" column="selling_other_cost"/>
		<result property="sellingTotalAmount" column="selling_total_amount"/>
		<result property="sellingInspection" column="selling_inspection"/>
		<result property="sellingStatus" column="selling_status"/>
		<result property="sellingRemarks" column="selling_remarks"/>
		<result property="loss" column="loss"/>
		<result property="shipmentCode" column="shipment_code"/>
		<result property="createBy"     column="create_by"    />
		<result property="createTime"   column="create_time"  />
		<result property="updateBy"     column="update_by"    />
		<result property="updateTime"   column="update_time"  />
	</resultMap>

	<!-- SQL 查询语句 -->
	<sql id="selectAfterSalesBatch">
		SELECT
			after_sales_batch_id,
			order_number,
			product_name,
			internal_product_code,
			quantity,
			recipient,
			contact_phone,
			address,
			date,
			remarks,
			brand,
			return_and_after_sales,
			purchase_price,
			purchase_other_cost,
			purchase_total_amount,
			purchase_inspection,
			purchase_status,
			purchase_remarks,
			selling_price,
			selling_other_cost,
			selling_total_amount,
			selling_inspection,
			selling_status,
			selling_remarks,
			loss,
			shipment_code
		FROM after_sales_batch
	</sql>

	<!-- 根据条件查询所有 AfterSalesBatch -->
	<select id="selectAllAfterSalesBatchs" resultMap="AfterSalesBatchMap">
		<include refid="selectAfterSalesBatch"/>
		<where>
			<if test="orderNumber != null and orderNumber != ''">
				AND order_number = #{orderNumber}
			</if>
			<if test="productName != null and productName != ''">
				AND product_name = #{productName}
			</if>
			<if test="internalProductCode != null and internalProductCode != ''">
				AND internal_product_code = #{internalProductCode}
			</if>
			<if test="quantity != null">
				AND quantity = #{quantity}
			</if>
			<if test="recipient != null and recipient != ''">
				AND recipient = #{recipient}
			</if>
			<if test="contactPhone != null and contactPhone != ''">
				AND contact_phone = #{contactPhone}
			</if>
			<if test="address != null and address != ''">
				AND address = #{address}
			</if>
			<if test="date != null">
				AND date = #{date}
			</if>
			<if test="remarks != null and remarks != ''">
				AND remarks = #{remarks}
			</if>
			<if test="brand != null and brand != ''">
				AND brand = #{brand}
			</if>
			<if test="returnAndAfterSales != null and returnAndAfterSales != ''">
				AND return_and_after_sales = #{returnAndAfterSales}
			</if>
			<if test="purchasePrice != null">
				AND purchase_price = #{purchasePrice}
			</if>
			<if test="purchaseOtherCost != null">
				AND purchase_other_cost = #{purchaseOtherCost}
			</if>
			<if test="purchaseTotalAmount != null">
				AND purchase_total_amount = #{purchaseTotalAmount}
			</if>
			<if test="purchaseInspection != null and purchaseInspection != ''">
				AND purchase_inspection = #{purchaseInspection}
			</if>
			<if test="purchaseStatus != null and purchaseStatus != ''">
				AND purchase_status = #{purchaseStatus}
			</if>
			<if test="purchaseRemarks != null and purchaseRemarks != ''">
				AND purchase_remarks = #{purchaseRemarks}
			</if>
			<if test="sellingPrice != null">
				AND selling_price = #{sellingPrice}
			</if>
			<if test="sellingOtherCost != null">
				AND selling_other_cost = #{sellingOtherCost}
			</if>
			<if test="sellingTotalAmount != null">
				AND selling_total_amount = #{sellingTotalAmount}
			</if>
			<if test="sellingInspection != null and sellingInspection != ''">
				AND selling_inspection = #{sellingInspection}
			</if>
			<if test="sellingStatus != null and sellingStatus != ''">
				AND selling_status = #{sellingStatus}
			</if>
			<if test="sellingRemarks != null and sellingRemarks != ''">
				AND selling_remarks = #{sellingRemarks}
			</if>
			<if test="loss != null">
				AND loss = #{loss}
			</if>
			<if test="shipmentCode != null and shipmentCode != ''">
				AND shipment_code = #{shipmentCode}
			</if>
		</where>
	</select>

	<!-- 根据 ID 查询单个 AfterSalesBatch -->
	<select id="selectAfterSalesBatchById" parameterType="Long" resultMap="AfterSalesBatchMap">
		<include refid="selectAfterSalesBatch"/> WHERE after_sales_batch_id = #{afterSalesBatchId}
	</select>

	<!-- Insert -->
	<insert id="insertAfterSalesBatch" parameterType="com.ruoyi.common.core.domain.newEntity.AfterSalesBatch">
		INSERT INTO after_sales_batch (
		<if test="orderNumber != null">order_number,</if>
		<if test="productName != null">product_name,</if>
		<if test="internalProductCode != null">internal_product_code,</if>
		<if test="quantity != null">quantity,</if>
		<if test="recipient != null">recipient,</if>
		<if test="contactPhone != null">contact_phone,</if>
		<if test="address != null">address,</if>
		<if test="date != null">date,</if>
		<if test="remarks != null">remarks,</if>
		<if test="brand != null">brand,</if>
		<if test="returnAndAfterSales != null">return_and_after_sales,</if>
		<if test="purchasePrice != null">purchase_price,</if>
		<if test="purchaseOtherCost != null">purchase_other_cost,</if>
		<if test="purchaseTotalAmount != null">purchase_total_amount,</if>
		<if test="purchaseInspection != null">purchase_inspection,</if>
		<if test="purchaseStatus != null">purchase_status,</if>
		<if test="purchaseRemarks != null">purchase_remarks,</if>
		<if test="sellingPrice != null">selling_price,</if>
		<if test="sellingOtherCost != null">selling_other_cost,</if>
		<if test="sellingTotalAmount != null">selling_total_amount,</if>
		<if test="sellingInspection != null">selling_inspection,</if>
		<if test="sellingStatus != null">selling_status,</if>
		<if test="sellingRemarks != null">selling_remarks,</if>
		<if test="loss != null">loss,</if>
		<if test="shipmentCode != null">shipment_code,</if>
		create_time
		) VALUES (
		<if test="orderNumber != null">#{orderNumber},</if>
		<if test="productName != null">#{productName},</if>
		<if test="internalProductCode != null">#{internalProductCode},</if>
		<if test="quantity != null">#{quantity},</if>
		<if test="recipient != null">#{recipient},</if>
		<if test="contactPhone != null">#{contactPhone},</if>
		<if test="address != null">#{address},</if>
		<if test="date != null">#{date},</if>
		<if test="remarks != null">#{remarks},</if>
		<if test="brand != null">#{brand},</if>
		<if test="returnAndAfterSales != null">#{returnAndAfterSales},</if>
		<if test="purchasePrice != null">#{purchasePrice},</if>
		<if test="purchaseOtherCost != null">#{purchaseOtherCost},</if>
		<if test="purchaseTotalAmount != null">#{purchaseTotalAmount},</if>
		<if test="purchaseInspection != null">#{purchaseInspection},</if>
		<if test="purchaseStatus != null">#{purchaseStatus},</if>
		<if test="purchaseRemarks != null">#{purchaseRemarks},</if>
		<if test="sellingPrice != null">#{sellingPrice},</if>
		<if test="sellingOtherCost != null">#{sellingOtherCost},</if>
		<if test="sellingTotalAmount != null">#{sellingTotalAmount},</if>
		<if test="sellingInspection != null">#{sellingInspection},</if>
		<if test="sellingStatus != null">#{sellingStatus},</if>
		<if test="sellingRemarks != null">#{sellingRemarks},</if>
		<if test="loss != null">#{loss},</if>
		<if test="shipmentCode != null">#{shipmentCode},</if>
		sysdate()
		)
	</insert>

	<!-- Update -->
	<update id="updateAfterSalesBatch" parameterType="com.ruoyi.common.core.domain.newEntity.AfterSalesBatch">
		UPDATE after_sales_batch
		<set>
			<if test="orderNumber != null">order_number = #{orderNumber},</if>
			<if test="productName != null">product_name = #{productName},</if>
			<if test="internalProductCode != null">internal_product_code = #{internalProductCode},</if>
			<if test="quantity != null">quantity = #{quantity},</if>
			<if test="recipient != null">recipient = #{recipient},</if>
			<if test="contactPhone != null">contact_phone = #{contactPhone},</if>
			<if test="address != null">address = #{address},</if>
			<if test="date != null">date = #{date},</if>
			<if test="remarks != null">remarks = #{remarks},</if>
			<if test="brand != null">brand = #{brand},</if>
			<if test="returnAndAfterSales != null">return_and_after_sales = #{returnAndAfterSales},</if>
			<if test="purchasePrice != null">purchase_price = #{purchasePrice},</if>
			<if test="purchaseOtherCost != null">purchase_other_cost = #{purchaseOtherCost},</if>
			<if test="purchaseTotalAmount != null">purchase_total_amount = #{purchaseTotalAmount},</if>
			<if test="purchaseInspection != null">purchase_inspection = #{purchaseInspection},</if>
			<if test="purchaseStatus != null">purchase_status = #{purchaseStatus},</if>
			<if test="purchaseRemarks != null">purchase_remarks = #{purchaseRemarks},</if>
			<if test="sellingPrice != null">selling_price = #{sellingPrice},</if>
			<if test="sellingOtherCost != null">selling_other_cost = #{sellingOtherCost},</if>
			<if test="sellingTotalAmount != null">selling_total_amount = #{sellingTotalAmount},</if>
			<if test="sellingInspection != null">selling_inspection = #{sellingInspection},</if>
			<if test="sellingStatus != null">selling_status = #{sellingStatus},</if>
			<if test="sellingRemarks != null">selling_remarks = #{sellingRemarks},</if>
			<if test="loss != null">loss = #{loss},</if>
			<if test="shipmentCode != null">shipment_code = #{shipmentCode},</if>
			update_time = sysdate()
		</set>
		WHERE after_sales_batch_id = #{afterSalesBatchId}
	</update>

	<!-- 删除 AfterSalesBatch -->
	<delete id="deleteAfterSalesBatchById" parameterType="Long">
		DELETE FROM after_sales_batch WHERE after_sales_batch_id = #{afterSalesBatchId}
	</delete>

	<!-- 根据多个 ID 删除 AfterSalesBatch -->
	<delete id="deleteAfterSalesBatchsByIds" parameterType="Long">
		DELETE FROM after_sales_batch WHERE after_sales_batch_id IN
		<foreach collection="array" item="afterSalesBatchId" open="(" separator="," close=")">
			#{afterSalesBatchId}
		</foreach>
	</delete>
</mapper> 